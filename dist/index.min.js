!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("leaflet"),require("jquery"),require("numeric")):"function"==typeof define&&define.amd?define(["leaflet","jquery","numeric"],r):"object"==typeof exports?exports["leaflet-distortable-video"]=r(require("leaflet"),require("jquery"),require("numeric")):t["leaflet-distortable-video"]=r(t.L,t.jQuery,t.numeric)}(self,((t,r,e)=>(()=>{"use strict";var o={53:t=>{t.exports=e},47:t=>{t.exports=r},303:r=>{r.exports=t}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var e=n[t]={exports:{}};return o[t](e,e.exports,i),e.exports}i.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return i.d(r,{a:r}),r},i.d=(t,r)=>{for(var e in r)i.o(r,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},i.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{i.r(a),i.d(a,{default:()=>v});var t=i(303),r=i.n(t),e=i(47),o=i.n(e),n=i(53),u=i.n(n);function f(t,r,e,o){var n=e.x,i=e.y,a=[n,i,1,0,0,0,-o.x*n,-o.x*i],u=[0,0,0,n,i,1,-o.y*n,-o.y*i];t.push(a),r.push(o.x),t.push(u),r.push(o.y)}function s(t){var r,e,o,n,i,a,u,f=$(t);return r={x:0,y:0},e=f.height(),o=f.width(),{topLeft:r,topRight:{x:a=(n=r.x)+o,y:i=r.y},bottomRight:{x:a,y:u=i+e},bottomLeft:{x:n,y:u}}}function c(t,r){return t.x===r.x&&t.y===r.y}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function h(t,r,e){return(r=function(t){var r=function(t,r){if("object"!==l(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!==l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===l(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function p(t,r){var e;return h(e={},"-webkit-"+t,r),h(e,"-khtml-"+t,r),h(e,"-moz-"+t,r),h(e,"-ms-"+t,r),h(e,"-o-"+t,r),h(e,t,r),e}function y(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var o,n,i,a,u=[],f=!0,s=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;f=!1}else for(;!(f=(o=i.call(e)).done)&&(u.push(o.value),u.length!==r);f=!0);}catch(t){s=!0,n=t}finally{try{if(!f&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw n}}return u}}(t,r)||b(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,r){if(t){if("string"==typeof t)return d(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,r):void 0}}function d(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=t[e];return o}var g=r().VideoOverlay.extend({initialize:function(t,e,o){this._url=t,this._bounds=this._getCorners(e),r().Util.setOptions(this,o)},setBounds:function(t){return this.setCorners(this._boundsToCorners(t))},setCorners:function(t){return this._bounds=this._getCorners(t),this._map&&this._reset(),this},_initImage:function(){r().VideoOverlay.prototype._initImage.call(this),this._image.style.objectFit="fill"},_reset:function(){var t=this,r=this._image,e=this._map.getContainer();o()(r).css(p("transition","width 0.05s")),r.style.width=o()(e).width()+"px",r.style.height=o()(e).height()+"px";var n=s(e);this._projectVideoOnMap(n,(function(r){var e=t._map.latLngToLayerPoint(r),o=e.x,n=e.y;return{x:Math.round(o),y:Math.round(n)}}))},_animateZoom:function(t){var r=this,e=t.zoom,o=t.center,n=s(this.image);this._projectVideoOnMap(n,(function(t){var n=r._map._latLngToNewLayerPoint(t,e,o),i=n.x,a=n.y;return{x:Math.round(i),y:Math.round(a)}}))},_projectVideoOnMap:function(t,r){var e=this._bounds,n=o()(this._image),i=function(t,r){var e=t.topLeft,o=t.topRight,n=t.bottomLeft,i=t.bottomRight;return{topLeft:r(e),topRight:r(o),bottomLeft:r(n),bottomRight:r(i)}}(e,r),a=function(t){var r=t.topLeft,e=t.topRight,o=t.bottomRight,n=t.bottomLeft;if(c(r,e))return!0;var i=[r,e];return!!i.some((function(t){return c(t,o)}))||(i.push(o),i.some((function(t){return c(t,n)})))}(i)?this._projectAsRectangle(i):this._projectWithProjectiveMatrix(t,i);n.css(p("transform",a)),n.css(p("transform-origin","0 0 0px"))},_projectWithProjectiveMatrix:function(t,r){var e=function(t,r){var e=[],o=[];f(e,o,t.topLeft,r.topLeft),f(e,o,t.topRight,r.topRight),f(e,o,t.bottomLeft,r.bottomLeft),f(e,o,t.bottomRight,r.bottomRight);var n=u().solve(e,o);return[[n[0],n[1],0,n[2]],[n[3],n[4],0,n[5]],[0,0,1,0],[n[6],n[7],0,1]]}(t,r);return function(t){for(var r=[],e=0;e<4;e++)for(var o=0;o<4;o++)r.push(t[o][e].toFixed(20));return"matrix3d(".concat(r.join(","),")")}(e)},_projectAsRectangle:function(t){var r,e,n,i,a,u=o()(this._image),f=(e=(r=t).topLeft,n=r.topRight,i=r.bottomRight,a=r.bottomLeft,[e.x,n.x,i.x,a.x]),s=function(t){var r=t.topLeft,e=t.topRight,o=t.bottomRight,n=t.bottomLeft;return[r.y,e.y,o.y,n.y]}(t),c=Math.min.apply(Math,m(f)),l=Math.max.apply(Math,m(f)),h=Math.min.apply(Math,m(s)),p=Math.max.apply(Math,m(s)),y={height:u.height(),width:u.width()},b={height:p-h,width:l-c};return"".concat(function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"translate3d(".concat(t,"px, ").concat(r,"px, ").concat(e,"px)")}(c,h)," ").concat(function(t,r){return"scale3d(".concat(r.width/t.width,", ").concat(r.height/t.height,", 1)")}(y,b))},_getCorners:function(t){return function(t){var r=t.topLeft,e=t.topRight,o=t.bottomLeft,n=t.bottomRight;return!!(r&&e&&o&&n)}(t)?t:this._isPointArray(t)?this._pointArrayToCorners(t):this._boundsToCorners(t)},_boundsToCorners:function(t){return{topLeft:(t=r().latLngBounds(t)).getNorthWest(),topRight:t.getNorthEast(),bottomLeft:t.getSouthWest(),bottomRight:t.getSouthEast()}},_pointArrayToCorners:function(t){var r=y(t,4);return{topLeft:r[0],topRight:r[1],bottomRight:r[2],bottomLeft:r[3]}},_isPointArray:function(t){if(!Array.isArray(t))return!1;var r=y(t,4),e=r[0],o=r[1],n=r[2],i=r[3];return!!(e&&o&&n&&i)}});function v(t,r,e){return new g(t,r,e)}r().DistortableVideoOverlay=g,r().distortableVideoOverlay=v})(),a})()));
//# sourceMappingURL=index.min.js.map