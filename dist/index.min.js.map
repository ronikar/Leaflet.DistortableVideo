{"version":3,"file":"index.min.js","mappings":"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","sources":["webpack://leaflet-distortable-video/webpack/universalModuleDefinition","webpack://leaflet-distortable-video/external umd \"numeric\"","webpack://leaflet-distortable-video/external umd {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack://leaflet-distortable-video/external umd {\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\",\"amd\":\"leaflet\",\"root\":\"L\"}","webpack://leaflet-distortable-video/webpack/bootstrap","webpack://leaflet-distortable-video/webpack/runtime/compat get default export","webpack://leaflet-distortable-video/webpack/runtime/define property getters","webpack://leaflet-distortable-video/webpack/runtime/hasOwnProperty shorthand","webpack://leaflet-distortable-video/webpack/runtime/make namespace object","webpack://leaflet-distortable-video/./src/utility/projections.js","webpack://leaflet-distortable-video/./src/utility/corners.js","webpack://leaflet-distortable-video/./src/utility/css.js","webpack://leaflet-distortable-video/./src/distortableVideoOverlay.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"), require(\"jquery\"), require(\"numeric\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"leaflet\", \"jquery\", \"numeric\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"leaflet-distortable-video\"] = factory(require(\"leaflet\"), require(\"jquery\"), require(\"numeric\"));\n\telse\n\t\troot[\"leaflet-distortable-video\"] = factory(root[\"L\"], root[\"jQuery\"], root[\"numeric\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__303__, __WEBPACK_EXTERNAL_MODULE__47__, __WEBPACK_EXTERNAL_MODULE__53__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__53__;","module.exports = __WEBPACK_EXTERNAL_MODULE__47__;","module.exports = __WEBPACK_EXTERNAL_MODULE__303__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import numeric from \"numeric\";\r\n\r\nexport function findProjectiveMatrix(origin, target) {\r\n    let matrix = [];\r\n    let b = [];\r\n\r\n    _addCondition(matrix, b, origin.topLeft, target.topLeft);\r\n    _addCondition(matrix, b, origin.topRight, target.topRight);\r\n    _addCondition(matrix, b, origin.bottomLeft, target.bottomLeft);\r\n    _addCondition(matrix, b, origin.bottomRight, target.bottomRight);\r\n\r\n    const x = numeric.solve(matrix, b);\r\n\r\n    return [[x[0], x[1], 0, x[2]],\r\n    [x[3], x[4], 0, x[5]],\r\n    [0, 0, 1, 0],\r\n    [x[6], x[7], 0, 1]];\r\n}\r\n\r\nfunction _addCondition(matrix, b, origin, target) {\r\n    const { x, y } = origin;\r\n    const firstCondition = [x, y, 1, 0, 0, 0, -target.x * x, -target.x * y];\r\n    const secondCondition = [0, 0, 0, x, y, 1, -target.y * x, -target.y * y];\r\n    matrix.push(firstCondition);\r\n    b.push(target.x);\r\n\r\n    matrix.push(secondCondition);\r\n    b.push(target.y);\r\n}","export function isCorners(value) {\r\n    const { topLeft, topRight, bottomLeft, bottomRight } = value;\r\n\r\n    return !!topLeft && !!topRight && !!bottomLeft && !!bottomRight;\r\n}\r\n\r\nexport function getElementCorners(element) {\r\n    const jElement = $(element);\r\n    return calculateRectangleCorners({ x: 0, y: 0 }, jElement.height(), jElement.width());\r\n}\r\n\r\nexport function calculateRectangleCorners(topLeft, height, width) {\r\n    const { x: left, y: top } = topLeft;\r\n    const right = left + width;\r\n    const bottom = top + height;\r\n\r\n    const topRight = { x: right, y: top };\r\n    const bottomRight = { x: right, y: bottom };\r\n    const bottomLeft = { x: left, y: bottom };\r\n\r\n    return { topLeft, topRight, bottomRight, bottomLeft };\r\n}\r\n\r\nexport function areSomeCornersEqual(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n\r\n    if (areCornersEqual(topLeft, topRight)) return true;\r\n\r\n    const arr = [topLeft, topRight];\r\n    if (arr.some(corner => areCornersEqual(corner, bottomRight))) return true;\r\n\r\n    arr.push(bottomRight);\r\n\r\n    return arr.some(corner => areCornersEqual(corner, bottomLeft));\r\n}\r\n\r\nexport function areCornersEqual(corner, otherCorner) {\r\n    return corner.x === otherCorner.x && corner.y === otherCorner.y;\r\n}\r\n\r\nexport function getXCoordinates(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n    return [topLeft.x, topRight.x, bottomRight.x, bottomLeft.x];\r\n}\r\n\r\nexport function getYCoordinates(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n    return [topLeft.y, topRight.y, bottomRight.y, bottomLeft.y];\r\n}","export function getCssWithPrefixes(key, value) {\r\n    return {\r\n        [\"-webkit-\" + key]: value,\r\n        [\"-khtml-\" + key]: value,\r\n        [\"-moz-\" + key]: value,\r\n        [\"-ms-\" + key]: value,\r\n        [\"-o-\" + key]: value,\r\n        [key]: value\r\n    };\r\n}\r\n\r\nexport function projectiveMatrixToCssValue(matrix) {\r\n    const matrixValues = [];\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n        for (let j = 0; j < 4; j++)\r\n            matrixValues.push(matrix[j][i].toFixed(20));\r\n    }\r\n\r\n    return `matrix3d(${matrixValues.join(',')})`;\r\n}\r\n\r\nexport function getScale3dCssValue(origin, target) {\r\n    return `scale3d(${target.width / origin.width}, ${target.height / origin.height}, 1)`;\r\n}\r\n\r\nexport function getTranslate3dCssValue(tx, ty, tz = 0) {\r\n    return `translate3d(${tx}px, ${ty}px, ${tz}px)`;\r\n}","import L from \"leaflet\";\r\nimport $ from \"jquery\";\r\n\r\nimport { findProjectiveMatrix } from \"./utility/projections\";\r\nimport { isCorners, getElementCorners, getXCoordinates, getYCoordinates, areSomeCornersEqual } from \"./utility/corners\";\r\nimport { getCssWithPrefixes, projectiveMatrixToCssValue, getScale3dCssValue, getTranslate3dCssValue } from \"./utility/css\";\r\n\r\nconst DistortableVideoOverlay = L.VideoOverlay.extend({\r\n    initialize: function (element, bounds, options) {\r\n        this._url = element;\r\n        this._bounds = this._getCorners(bounds);\r\n        L.Util.setOptions(this, options);\r\n    },\r\n\r\n    setBounds: function (bounds) {\r\n        return this.setCorners(this._boundsToCorners(bounds));\r\n    },\r\n\r\n    setCorners: function (corners) {\r\n        this._bounds = this._getCorners(corners);\r\n\r\n        if (this._map) {\r\n            this._reset();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    _initImage: function () {\r\n        L.VideoOverlay.prototype._initImage.call(this);\r\n        this._image.style['objectFit'] = 'fill';\r\n    },\r\n\r\n    _reset: function () {\r\n        const image = this._image;\r\n        const map = this._map.getContainer();\r\n\r\n        $(image).css(getCssWithPrefixes(\"transition\", \"width 0.05s\"));\r\n        image.style.width = $(map).width() + 'px';\r\n        image.style.height = $(map).height() + 'px';\r\n\r\n        const originAfterReset = getElementCorners(map);\r\n        const pixelicPositionProvider = (point) => {\r\n            const { x, y } = this._map.latLngToLayerPoint(point);\r\n            return { x: Math.round(x), y: Math.round(y) }\r\n        };\r\n\r\n        this._projectVideoOnMap(originAfterReset, pixelicPositionProvider);\r\n    },\r\n\r\n    _animateZoom: function (e) {\r\n        const { zoom, center } = e;\r\n        const videoPosition = getElementCorners(this.image);\r\n        const pixelicPositionProvider = (point) => {\r\n            const { x, y } = this._map._latLngToNewLayerPoint(point, zoom, center);\r\n            return { x: Math.round(x), y: Math.round(y) }\r\n        };\r\n\r\n        this._projectVideoOnMap(videoPosition, pixelicPositionProvider);\r\n    },\r\n\r\n    _projectVideoOnMap: function (origin, pixelicPositionProvider) {\r\n        const corners = this._bounds;\r\n        const videoElement = $(this._image);\r\n        const target = _getTargetCorners(corners, pixelicPositionProvider);\r\n\r\n        const cssTransformValue = areSomeCornersEqual(target) ? this._projectAsRectangle(target) :\r\n            this._projectWithProjectiveMatrix(origin, target);\r\n\r\n        videoElement.css(getCssWithPrefixes(\"transform\", cssTransformValue));\r\n        videoElement.css(getCssWithPrefixes(\"transform-origin\", '0 0 0px'));\r\n    },\r\n\r\n    _projectWithProjectiveMatrix: function (origin, target) {\r\n        const matrix3d = findProjectiveMatrix(origin, target);\r\n        return projectiveMatrixToCssValue(matrix3d);\r\n    },\r\n\r\n    _projectAsRectangle: function (target) {\r\n        const videoElement = $(this._image);\r\n        const xCoordinates = getXCoordinates(target);\r\n        const yCoordinates = getYCoordinates(target);\r\n\r\n        const minX = Math.min(...xCoordinates);\r\n        const maxX = Math.max(...xCoordinates);\r\n        const minY = Math.min(...yCoordinates);\r\n        const maxY = Math.max(...yCoordinates);\r\n\r\n        const size = { height: videoElement.height(), width: videoElement.width() };\r\n        const afterScalingSize = { height: maxY - minY, width: maxX - minX };\r\n\r\n        return `${getTranslate3dCssValue(minX, minY)} ${getScale3dCssValue(size, afterScalingSize)}`;\r\n    },\r\n\r\n    _getCorners: function (value) {\r\n        if (isCorners(value)) return value;\r\n        if (this._isPointArray(value)) return this._pointArrayToCorners(value);\r\n        return this._boundsToCorners(value);\r\n    },\r\n\r\n    _boundsToCorners: function (bounds) {\r\n        bounds = L.latLngBounds(bounds);\r\n\r\n        return {\r\n            topLeft: bounds.getNorthWest(),\r\n            topRight: bounds.getNorthEast(),\r\n            bottomLeft: bounds.getSouthWest(),\r\n            bottomRight: bounds.getSouthEast()\r\n        };\r\n    },\r\n\r\n    _pointArrayToCorners: function (points) {\r\n        const [topLeft, topRight, bottomRight, bottomLeft] = points;\r\n        return { topLeft, topRight, bottomRight, bottomLeft };\r\n    },\r\n\r\n    _isPointArray: function (value) {\r\n        if (!Array.isArray(value)) return false;\r\n\r\n        const [topLeft, topRight, bottomRight, bottomLeft] = value;\r\n        return !!topLeft && !!topRight && !!bottomRight && !!bottomLeft;\r\n    }\r\n});\r\n\r\nfunction _getTargetCorners(geographicCorners, pixelicPositionProvider) {\r\n    const { topLeft, topRight, bottomLeft, bottomRight } = geographicCorners;\r\n\r\n    return {\r\n        topLeft: pixelicPositionProvider(topLeft),\r\n        topRight: pixelicPositionProvider(topRight),\r\n        bottomLeft: pixelicPositionProvider(bottomLeft),\r\n        bottomRight: pixelicPositionProvider(bottomRight)\r\n    }\r\n};\r\n\r\nexport default function distortableVideoOverlay(url, corners, options) {\r\n    return new DistortableVideoOverlay(url, corners, options);\r\n}\r\n\r\nL.DistortableVideoOverlay = DistortableVideoOverlay;\r\nL.distortableVideoOverlay = distortableVideoOverlay;"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__303__","__WEBPACK_EXTERNAL_MODULE__47__","__WEBPACK_EXTERNAL_MODULE__53__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","_addCondition","matrix","b","origin","target","x","y","firstCondition","secondCondition","push","getElementCorners","element","topLeft","height","width","left","top","right","bottom","jElement","$","topRight","bottomRight","bottomLeft","areCornersEqual","corner","otherCorner","getCssWithPrefixes","_ref","_defineProperty","DistortableVideoOverlay","L","extend","initialize","bounds","options","this","_url","_bounds","_getCorners","setOptions","setBounds","setCorners","_boundsToCorners","corners","_map","_reset","_initImage","_image","style","_this","image","map","getContainer","css","originAfterReset","_projectVideoOnMap","point","_this$_map$latLngToLa","latLngToLayerPoint","Math","round","_animateZoom","e","_this2","zoom","center","videoPosition","_this2$_map$_latLngTo","_latLngToNewLayerPoint","pixelicPositionProvider","videoElement","geographicCorners","_getTargetCorners","cssTransformValue","arr","some","areSomeCornersEqual","_projectAsRectangle","_projectWithProjectiveMatrix","matrix3d","numeric","findProjectiveMatrix","matrixValues","i","j","toFixed","concat","join","projectiveMatrixToCssValue","xCoordinates","yCoordinates","getYCoordinates","minX","min","apply","_toConsumableArray","maxX","max","minY","maxY","size","afterScalingSize","tx","ty","tz","arguments","length","getTranslate3dCssValue","getScale3dCssValue","isCorners","_isPointArray","_pointArrayToCorners","getNorthWest","getNorthEast","getSouthWest","getSouthEast","points","_points","_slicedToArray","Array","isArray","_value","distortableVideoOverlay","url"],"sourceRoot":""}