{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/distortableVideoOverlay.js","webpack:///./src/utility/corners.js","webpack:///./src/utility/css.js","webpack:///./src/utility/projections.js","webpack:///external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack:///external {\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\",\"amd\":\"leaflet\",\"root\":\"L\"}","webpack:///external \"numeric\""],"names":["DistortableVideoOverlay","L","VideoOverlay","extend","initialize","element","bounds","options","_url","_bounds","_getCorners","Util","setOptions","setBounds","setCorners","_boundsToCorners","corners","_map","_reset","_initImage","prototype","call","_image","style","image","map","getContainer","$","css","getCssWithPrefixes","width","height","originAfterReset","getElementCorners","pixelicPositionProvider","point","latLngToLayerPoint","x","y","Math","round","_projectVideoOnMap","_animateZoom","e","zoom","center","videoPosition","_latLngToNewLayerPoint","origin","videoElement","target","_getTargetCorners","cssTransformValue","areSomeCornersEqual","_projectAsRectangle","_projectWithProjectiveMatrix","matrix3d","findProjectiveMatrix","projectiveMatrixToCssValue","xCoordinates","getXCoordinates","yCoordinates","getYCoordinates","minX","min","maxX","max","minY","maxY","size","afterScalingSize","getTranslate3dCssValue","getScale3dCssValue","value","isCorners","_isPointArray","_pointArrayToCorners","latLngBounds","topLeft","getNorthWest","topRight","getNorthEast","bottomLeft","getSouthWest","bottomRight","getSouthEast","points","Array","isArray","geographicCorners","distortableVideoOverlay","url","jElement","calculateRectangleCorners","left","top","right","bottom","areCornersEqual","arr","some","corner","push","otherCorner","key","matrix","matrixValues","i","j","toFixed","join","tx","ty","tz","b","_addCondition","numeric","solve","firstCondition","secondCondition"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"leaflet\"), require(\"numeric\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"leaflet\", \"numeric\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"jquery\"), require(\"leaflet\"), require(\"numeric\")) : factory(root[\"jQuery\"], root[\"L\"], root[\"numeric\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE_jquery__, __WEBPACK_EXTERNAL_MODULE_leaflet__, __WEBPACK_EXTERNAL_MODULE_numeric__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/distortableVideoOverlay.js\");\n","import L from \"leaflet\";\r\nimport $ from \"jquery\";\r\n\r\nimport { findProjectiveMatrix } from \"./utility/projections\";\r\nimport { isCorners, getElementCorners, getXCoordinates, getYCoordinates, areSomeCornersEqual } from \"./utility/corners\";\r\nimport { getCssWithPrefixes, projectiveMatrixToCssValue, getScale3dCssValue, getTranslate3dCssValue } from \"./utility/css\";\r\n\r\nconst DistortableVideoOverlay = L.VideoOverlay.extend({\r\n    initialize: function (element, bounds, options) {\r\n        this._url = element;\r\n        this._bounds = this._getCorners(bounds);\r\n        L.Util.setOptions(this, options);\r\n    },\r\n\r\n    setBounds: function (bounds) {\r\n        return this.setCorners(this._boundsToCorners(bounds));\r\n    },\r\n\r\n    setCorners: function (corners) {\r\n        this._bounds = this._getCorners(corners);\r\n\r\n        if (this._map) {\r\n            this._reset();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    _initImage: function () {\r\n        L.VideoOverlay.prototype._initImage.call(this);\r\n        this._image.style['objectFit'] = 'fill';\r\n    },\r\n\r\n    _reset: function () {\r\n        const image = this._image;\r\n        const map = this._map.getContainer();\r\n\r\n        $(image).css(getCssWithPrefixes(\"transition\", \"width 0.05s\"));\r\n        image.style.width = $(map).width() + 'px';\r\n        image.style.height = $(map).height() + 'px';\r\n\r\n        const originAfterReset = getElementCorners(map);\r\n        const pixelicPositionProvider = (point) => {\r\n            const { x, y } = this._map.latLngToLayerPoint(point);\r\n            return { x: Math.round(x), y: Math.round(y) }\r\n        };\r\n\r\n        this._projectVideoOnMap(originAfterReset, pixelicPositionProvider);\r\n    },\r\n\r\n    _animateZoom: function (e) {\r\n        const { zoom, center } = e;\r\n        const videoPosition = getElementCorners(this.image);\r\n        const pixelicPositionProvider = (point) => {\r\n            const { x, y } = this._map._latLngToNewLayerPoint(point, zoom, center);\r\n            return { x: Math.round(x), y: Math.round(y) }\r\n        };\r\n\r\n        this._projectVideoOnMap(videoPosition, pixelicPositionProvider);\r\n    },\r\n\r\n    _projectVideoOnMap: function (origin, pixelicPositionProvider) {\r\n        const corners = this._bounds;\r\n        const videoElement = $(this._image);\r\n        const target = _getTargetCorners(corners, pixelicPositionProvider);\r\n\r\n        const cssTransformValue = areSomeCornersEqual(target) ? this._projectAsRectangle(target) :\r\n            this._projectWithProjectiveMatrix(origin, target);\r\n\r\n        videoElement.css(getCssWithPrefixes(\"transform\", cssTransformValue));\r\n        videoElement.css(getCssWithPrefixes(\"transform-origin\", '0 0 0px'));\r\n    },\r\n\r\n    _projectWithProjectiveMatrix: function (origin, target) {\r\n        const matrix3d = findProjectiveMatrix(origin, target);\r\n        return projectiveMatrixToCssValue(matrix3d);\r\n    },\r\n\r\n    _projectAsRectangle: function (target) {\r\n        const videoElement = $(this._image);\r\n        const xCoordinates = getXCoordinates(target);\r\n        const yCoordinates = getYCoordinates(target);\r\n\r\n        const minX = Math.min(...xCoordinates);\r\n        const maxX = Math.max(...xCoordinates);\r\n        const minY = Math.min(...yCoordinates);\r\n        const maxY = Math.max(...yCoordinates);\r\n\r\n        const size = { height: videoElement.height(), width: videoElement.width() };\r\n        const afterScalingSize = { height: maxY - minY, width: maxX - minX };\r\n\r\n        return `${getTranslate3dCssValue(minX, minY)} ${getScale3dCssValue(size, afterScalingSize)}`;\r\n    },\r\n\r\n    _getCorners: function (value) {\r\n        if (isCorners(value)) return value;\r\n        if (this._isPointArray(value)) return this._pointArrayToCorners(value);\r\n        return this._boundsToCorners(value);\r\n    },\r\n\r\n    _boundsToCorners: function (bounds) {\r\n        bounds = L.latLngBounds(bounds);\r\n\r\n        return {\r\n            topLeft: bounds.getNorthWest(),\r\n            topRight: bounds.getNorthEast(),\r\n            bottomLeft: bounds.getSouthWest(),\r\n            bottomRight: bounds.getSouthEast()\r\n        };\r\n    },\r\n\r\n    _pointArrayToCorners: function (points) {\r\n        const [topLeft, topRight, bottomRight, bottomLeft] = points;\r\n        return { topLeft, topRight, bottomRight, bottomLeft };\r\n    },\r\n\r\n    _isPointArray: function (value) {\r\n        if (!Array.isArray(value)) return false;\r\n\r\n        const [topLeft, topRight, bottomRight, bottomLeft] = value;\r\n        return !!topLeft && !!topRight && !!bottomRight && !!bottomLeft;\r\n    }\r\n});\r\n\r\nfunction _getTargetCorners(geographicCorners, pixelicPositionProvider) {\r\n    const { topLeft, topRight, bottomLeft, bottomRight } = geographicCorners;\r\n\r\n    return {\r\n        topLeft: pixelicPositionProvider(topLeft),\r\n        topRight: pixelicPositionProvider(topRight),\r\n        bottomLeft: pixelicPositionProvider(bottomLeft),\r\n        bottomRight: pixelicPositionProvider(bottomRight)\r\n    }\r\n};\r\n\r\nexport default function distortableVideoOverlay(url, corners, options) {\r\n    return new DistortableVideoOverlay(url, corners, options);\r\n}\r\n\r\nL.DistortableVideoOverlay = DistortableVideoOverlay;\r\nL.distortableVideoOverlay = distortableVideoOverlay;","export function isCorners(value) {\r\n    const { topLeft, topRight, bottomLeft, bottomRight } = value;\r\n\r\n    return !!topLeft && !!topRight && !!bottomLeft && !!bottomRight;\r\n}\r\n\r\nexport function getElementCorners(element) {\r\n    const jElement = $(element);\r\n    return calculateRectangleCorners({ x: 0, y: 0 }, jElement.height(), jElement.width());\r\n}\r\n\r\nexport function calculateRectangleCorners(topLeft, height, width) {\r\n    const { x: left, y: top } = topLeft;\r\n    const right = left + width;\r\n    const bottom = top + height;\r\n\r\n    const topRight = { x: right, y: top };\r\n    const bottomRight = { x: right, y: bottom };\r\n    const bottomLeft = { x: left, y: bottom };\r\n\r\n    return { topLeft, topRight, bottomRight, bottomLeft };\r\n}\r\n\r\nexport function areSomeCornersEqual(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n\r\n    if (areCornersEqual(topLeft, topRight)) return true;\r\n\r\n    const arr = [topLeft, topRight];\r\n    if (arr.some(corner => areCornersEqual(corner, bottomRight))) return true;\r\n\r\n    arr.push(bottomRight);\r\n\r\n    return arr.some(corner => areCornersEqual(corner, bottomLeft));\r\n}\r\n\r\nexport function areCornersEqual(corner, otherCorner) {\r\n    return corner.x === otherCorner.x && corner.y === otherCorner.y;\r\n}\r\n\r\nexport function getXCoordinates(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n    return [topLeft.x, topRight.x, bottomRight.x, bottomLeft.x];\r\n}\r\n\r\nexport function getYCoordinates(corners) {\r\n    const { topLeft, topRight, bottomRight, bottomLeft } = corners;\r\n    return [topLeft.y, topRight.y, bottomRight.y, bottomLeft.y];\r\n}","export function getCssWithPrefixes(key, value) {\r\n    return {\r\n        [\"-webkit-\" + key]: value,\r\n        [\"-khtml-\" + key]: value,\r\n        [\"-moz-\" + key]: value,\r\n        [\"-ms-\" + key]: value,\r\n        [\"-o-\" + key]: value,\r\n        [key]: value\r\n    };\r\n}\r\n\r\nexport function projectiveMatrixToCssValue(matrix) {\r\n    const matrixValues = [];\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n        for (let j = 0; j < 4; j++)\r\n            matrixValues.push(matrix[j][i].toFixed(20));\r\n    }\r\n\r\n    return `matrix3d(${matrixValues.join(',')})`;\r\n}\r\n\r\nexport function getScale3dCssValue(origin, target) {\r\n    return `scale3d(${target.width / origin.width}, ${target.height / origin.height}, 1)`;\r\n}\r\n\r\nexport function getTranslate3dCssValue(tx, ty, tz = 0) {\r\n    return `translate3d(${tx}px, ${ty}px, ${tz}px)`;\r\n}","import numeric from \"numeric\";\r\n\r\nexport function findProjectiveMatrix(origin, target) {\r\n    let matrix = [];\r\n    let b = [];\r\n\r\n    _addCondition(matrix, b, origin.topLeft, target.topLeft);\r\n    _addCondition(matrix, b, origin.topRight, target.topRight);\r\n    _addCondition(matrix, b, origin.bottomLeft, target.bottomLeft);\r\n    _addCondition(matrix, b, origin.bottomRight, target.bottomRight);\r\n\r\n    const x = numeric.solve(matrix, b);\r\n\r\n    return [[x[0], x[1], 0, x[2]],\r\n    [x[3], x[4], 0, x[5]],\r\n    [0, 0, 1, 0],\r\n    [x[6], x[7], 0, 1]];\r\n}\r\n\r\nfunction _addCondition(matrix, b, origin, target) {\r\n    const { x, y } = origin;\r\n    const firstCondition = [x, y, 1, 0, 0, 0, -target.x * x, -target.x * y];\r\n    const secondCondition = [0, 0, 0, x, y, 1, -target.y * x, -target.y * y];\r\n    matrix.push(firstCondition);\r\n    b.push(target.x);\r\n\r\n    matrix.push(secondCondition);\r\n    b.push(target.y);\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE_jquery__;","module.exports = __WEBPACK_EXTERNAL_MODULE_leaflet__;","module.exports = __WEBPACK_EXTERNAL_MODULE_numeric__;"],"sourceRoot":""}